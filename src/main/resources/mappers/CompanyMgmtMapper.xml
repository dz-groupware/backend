<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.backend.companymgmt.mapper.CompanyMgmtMapper">


  <insert id="addCompanyMgmt">
    INSERT INTO company (code, enabled_yn, name, abbr, business_type, rep_name, rep_id_num,
    rep_tel, business_num, corp_type, corp_num, establishment_date, opening_date, closing_date,
    address )VALUES(#{code}, #{enabledYn}, #{name}, #{abbr},
    #{businessType}, #{repName}, #{repIdNum}, #{repTel}, #{businessNum}, #{corpType}, #{corpNum},
    #{establishmentDate}, #{openingDate}, #{closingDate}, #{address} ) where par_id=#{companyId}
  </insert>

  <select id="getCompanyDetailsById"
    resultType="com.example.backend.companymgmt.dto.CompanyMgmtResDto">
    SELECT id,code, enabled_yn, name, abbr, business_type,
    rep_name, rep_id_num,
    rep_tel, business_num, corp_type, corp_num, establishment_date,
    opening_date, closing_date, address, deleted_yn from company WHERE id=#{id} and par_id=#{companyId}
  </select>

  <select id="findCompanyMgmtList" resultType="com.example.backend.companymgmt.dto.CompanyMgmtListResDto">
    SELECT id,code,name,corp_type,rep_name from company where deleted_yn=false and name LIKE #{name}
    and enabled_yn=#{enabledYn} and par_id=#{companyId}
  </select>

  <select id="findAllCompanyMgmtList"
    resultType="com.example.backend.companymgmt.dto.CompanyMgmtListResDto">
    SELECT id,code,name,corp_type,rep_name from company where deleted_yn=false and name LIKE #{name} and par_id=#{companyId}
  </select>

  <select id="getCompanyMgmtList"
    resultType="com.example.backend.companymgmt.dto.CompanyMgmtListResDto">
    SELECT id,code,name,corp_type,rep_name from company where deleted_yn=false and par_id=#{companyId}
  </select>

  <update id="modifyCompanyMgmt">
    UPDATE company SET enabled_yn=#{enabledYn}, name=#{name}, abbr=#{abbr},
    business_type=#{businessType},
    rep_name=#{repName}, rep_id_num=#{repIdNum},
    rep_tel=#{repTel}, business_num=#{businessNum}, corp_type=#{corpType}, corp_num=#{corpNum},
    establishment_date= #{establishmentDate},
    opening_date=#{openingDate}, closing_date=#{closingDate}, address=#{address}
    WHERE id=#{id} and par_id=#{companyId}
  </update>

  <update id="removeCompanyMgmt">
    UPDATE company SET deleted_yn=1
    WHERE id=#{id} and par_id=#{companyId}
  </update>

</mapper>